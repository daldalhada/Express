# Node 내장 기능 (1)

<br>

## 1. OS

```javascript

const os = require('os');

// OS 정보
console.log(os.arch());
console.log(os.platform());
console.log(os.type());
console.log(os.uptime());
console.log(os.hostname());

// 경로 정보
console.log(os.homedir());
console.log(os.tmpdir());

// CPU 정보
console.log(os.cpus());
console.log(os.cpus().length);

// 메모리 정보
console.log(os.freemem());
console.log(os.totalmem());

```

<br>

    - OS: 운영체제의 정보를 담고 있음
    - 모듈은 require로 가져옴
    - 내장 모듈이기 때문에 이름만 적어주면 됨

<br>

***

<br>

## 2. Path

<br>


```javascript

const path = require('path');

const string = __filename;

console.log(path.join(__dirname, '..', '/3-7.js'));
// c:\Users\daldalhada\Desktop\Express\javascript\3-7.js

console.log(path.resolve(__dirname, '..', '/3-8.js'));
// c:\3-8.js

console.log(path.dirname(string));
// c:\Users\daldalhada\Desktop\Express\javascript\3-2

console.log(path.extname(string));
// .js

console.log(path.basename(string));
// 3-8.js


console.log(path.parse(string));
/*
    {
        root: 'c:\', dir: 'c:\Users\daldalhada\Desktop\Express\javascript\3-2',
        base: '3-8.js',
        ext: '.js',
        name: '3-8'
    }
*/

console.log(path.format({
    dir: 'C:\\users\\daldalhada',
    name: 'path',
    ext: 'js',
}));
// C:\users\daldalhada\pathjs


```

<br>

    - 폴더와 파일의 경로를 쉽게 조작하도록 도와주는 모듈
    - join은 상대로 경로로, resolve는 절대경로로 처리
  
<br>


***

<br>

## 3. url과 querystring

<br>

```javascript


```

<br>

    - setTimeout(콜백함수, 밀리초): 주어진 밀리초 이후에 콜백 함수 실행
    - setInterval(콜백함수, 밀리초): 주어진 밀리초마다 콜백함수를 반복 실행
    - setImmediate(콜백함수): 콜백함수를 즉시 실행

<br>

    - clearTimeout(아이디): setTimeout을 취소
    - clearInterval(아이디): setIntalval을 취소
    - clearImmediate(아이디): setImmediate를 취소

<br>

![타이머 실행 결과](https://github.com/daldalhada/Express/blob/main/image/3/3-1/Node1.PNG)

<br>

***

<br>

## 4. Process

<br>

```javascript

console.log(process.version);   // v14.15.4
console.log(process.arch);      // x64
console.log(process.platform);  // win32
console.log(process.pid);       // 20348
console.log(process.uptime());  // 0.9734597
console.log(process.execPath);  //C:\Program Files\...
console.log(process.cpuUsage());  // {user:2100000, system: 2030000}

```

<br>

    - 현재 실행중인 노드 프로세스에 대한 정보를 담고 있음 
    - version: 설치된 노드 버전
    - arch: 프로세스 아키텍처 정보
    - pid: 실행중인 프로세스의 아이디
    - uptime(): 프로세스가 시작된 후 흐른 시간(단위는 초)
    - execPath: 노드의 경로
    - cpuUsage(): 현재 cpu 사용량

<br>

```javascript

const secretId = process.env.SECRET_ID;
const secretCode = process.env.SECRET_CODE;

NODE_OPTIONS=--max-old-space-size=8192
UV_THREADPOOL_SIZE=8

```

<br>

    - process.env: 시스템 환경 변수들이 들어 있는 객체
    - 환경 변수는 process.env로 접근 가능
    - 비밀키(데이터베이스 비밀번호, 서드파티 앱 키 등)를 보관하는 용도
    - 일부 환경 변수는 노드 실행시 영향을 미침
    - NODE_OPTIONS(노드 실행 옵션), UV_THREADPOOL_SIZE(스레드 풀 개수)
    - max-old-space-size는 노드가 사용할 수 있는 메모리를 지정하는 옵션

<br>

### 실행 결과는?

<br>

```javascript

setImmediate(() => {
    console.log('immediate');
});

process.nextTick(() => {
    console.log('nextTick');
});

setTimeout(() => {
    console.log('timeout');
}, 0);

Promise.resolve().then(() => console.log('Promise'));

```

<br>

    - 이벤트 루프가 다른 콜백함수들보다 nextTick의 콜백함수를 우선으로 처리함
    - 너무 남용하면 다른 콜백함수들의 실행이 느려짐
    - 비슷한 경우로 Promise가 있음(우선순위는 nextTick > Promise)
    - setImmediate아 setTimeout은 랜덤하게 작용

<br>

![타이머 실행 결과](https://github.com/daldalhada/Express/blob/main/image/3/3-1/Node2.PNG)

<br>

```javascript

let i = 1;
setInterval(() => {
    if(i==5) {
        console.log('종료!');
        process.exit();
    }
    console.log(i);
    i += 1;
}, 1000);

```

<br>

    - process.exit(코드)
    - 코드가 없거나 0이면 정상 종료
    - 이외의 코드는 에러로 인한 비정상 종료를 의미함

<br>

***

<br>