# Express (3)

<br>

## 11. dotenv

<br>

```javascript

const dotenv = require('dotenv');
dotenv.config();

app.use(cookieParser(process.env.COOKIE_SECRET));

```

<br>
    
    - dotenv(.env)는 환경변수를 관리할 수 있도록 도와주는 패키지 도구
    - npm i dotenv를 실행하여 패키지를 설치
    - 환경변수는 Git/SVN 같은 버전 컨트롤 시스템에서 관리하지 않는 것이 좋음(보안 측면)

<br>

***

<br>

## 12. express.Router

<br>

```javascript

// app.js
const indexRouter = require('./routes/index');
const userRouter = require('./routes/user');

// user.js
const express = require('express');
const router = express.Router();

router.get('/', (req, res) => {
    res.send('Hello User');
});

router.get('/user/:id', function(req, res) {
    console.log(req.params, req.query);
});

module.exports = router;

```

<br>

    - app.js가 길어지는 것을 방지
    - userRouter의 get은 /user와 /가 합쳐져 /user/가 됨
    - :id를 넣으면 req.params.id로 받을 수 있음. 즉, 동적으로 변하는 부분을 라우트 매개변수로 처리
    (일반 라우터보다 뒤에 위치해야 함)

<br>

```javascript

// 분리

router.get('/abc', (req, res) => {
    res.send('GET /abc');
});

router.post('/abc', (req, res) => {
    res.send('POST /abc');
});

// 한 번에 묶기(메서드 체이닝)

router.route('/abc')
    .get((req, res) => {
        res.send('GET /abc');
    })
    .post((req, res) => {
        res.send('POST /abc');
    });

```

<br>

    - 라우터 주소는 같지만 메서드가 다른 코드가 있을 때
    - router.route로 묶을 수 있음(메서드 체이닝)

<br>

***

<br>

## 13. req, res

<br>

    - req.app: req 객체를 통해 app 객체에 접근할 수 있음, req.app.get('port')와 같은 방식
    - req.body: body-parser 미들웨어가 만드는 요청의 본문을 해석한 객체
    - req.cookies: cookie-parser 미들웨어가 만드는 요청의 쿠키를 해석한 객체
    - req.ip: 요청 ip 주소가 담겨짐
    - req.params: 라우트 매개변수에 대한 정보가 담긴 객체
    - req.query: querystring에 대한 정보가 담긴 객체
    - req.get(헤더 이름): 헤더의 값을 가져오고 싶을 때 사용하는 메서드

<br>

    - res.app: res 객체를 통해 app 객체에 접근
    - res.cookie(키, 값, 옵션): 쿠키를 설정하는 메서드
    - res.clearCookie(키, 값, 옵션): 쿠키를 제거하는 메서드
    - res.end(): 데이터 없이 응답을 보냄
    - res.json(JSON): JSON 형식의 응답을 보냄
    - res.redirect(주소): 리다이렉트할 주소와 함께 응답을 보냄
    - res.render(뷰, 데이터): 템플릿 엔진을 렌더링해서 응답할 때 사용하는 메서드
    - res.sendFile(경로): 경로에 위치한 파일을 응답
    - res.set(헤더, 값): 응답의 헤더를 설정
    - res.status(코드): 응삽 시의 HTTP 상태 코드를 지정
  
<br>

***

<br>

## 13. Pug 템플릿 엔진

<br>

```javascript



```

<br>

    - 

<br>

***

<br>

## 14. 넌적스 템플릿 엔진

<br>

```javascript



```

<br>

    - 
  
<br>

    - 
<br>

***

<br>



